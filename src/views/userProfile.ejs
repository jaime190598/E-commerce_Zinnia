<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Zinnia</title>
    <link rel="stylesheet" href="/css/styles.css"/>
    <link rel="stylesheet" href="/css/stylesUsersProfile.css"/> 
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Montserrat:ital,wght@0,100;0,200;0,300;0,400;0,500;0,600;0,700;0,800;0,900;1,100;1,200;1,300;1,400;1,500;1,600;1,700;1,800;1,900&display=swap" rel="stylesheet">
    <link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.15.3/css/all.min.css" rel="stylesheet"/>
</head>
<body>
    <!--header-->
    <%- include('./partials/header.ejs') %>
   <main>
    <section>
      <div class="title">
            <h2>
                Bienvenido <%= user.name %> <%= user.lastName %>
            </h2>
      </div>
      <article class="body-container">
            <div class="avatar">
              <img src="/images/users/<%= user.avatar %>" alt="">
            </div>
            <div class="user-edit">
              <form  class="edituser" action="/user/edit?_method=put" method="POST" enctype="multipart/form-data">
              
              <input type="hidden" name="id" value="<%= user && user.iduser? user.iduser:''%>">
              <input type="hidden" name="image" value="<%= user && user.avatar? user.avatar:''%>">
                <div class="image-user">
                  <div class="preview" id="preview"></div>
                  <p>Nueva foto de perfil</p> 
                  <input type="file" id="avatar" name="avatar" accept="image/png, image/jpeg"><br/>
                  <% if (locals.errors && errors.avatar){ %> 
                  <p class="text-danger">
                        <%= errors.avatar.msg %>
                  </p>
                  <% } %>
                </div>
                <div class="to-name">
                  <div class="input-name">
                      <input type="text" name="name" id="name"
                       class=" <%= locals.errors && errors.name ? 'is-invalid': null %>"
                      value="<%= user && user.name? user.name: locals.oldData ? oldData.name : null %>">
                      <% if (locals.errors && errors.name){ %> 
                        <div class="text-danger">
                              <%= errors.name.msg %>
                        </div>
                      <% } %>
                  </div>
                  <div class="input-apellido">
                      <input type="text" name="last_name" id="last_name"
                       class=" <%= locals.errors && errors.last_name ? 'is-invalid': null %>"
                      value="<%= user && user.last_name? user.last_name: locals.oldData ? oldData.last_name : null %>" >
                      <% if (locals.errors && errors.last_name){ %> 
                        <div class="text-danger">
                              <%= errors.last_name.msg %>
                        </div>
                      <% } %>
                  </div>
                </div>
                <div class="input-re">
                  <input type="text" name="telephone" id="telephone"
                  placeholder="Telefono" class=" <%= locals.errors && errors.telephone ? 'is-invalid': null %>"
                  value="<%= user && user.telephone? user.telephone: locals.oldData ? oldData.telephone : null %>">
                  <% if (locals.errors && errors.telephone){ %> 
                    <div class="text-danger">
                          <%= errors.telephone.msg %>
                    </div>
                  <% } %>
                </div>
                <div class="input-re">
                  <input type="email" name="email" id="email"
                  class=" <%= locals.errors && errors.email ? 'is-invalid': null %>"
                  value="<%= user && user.email? user.email: locals.oldData ? oldData.email : null %>">
                  <% if (locals.errors && errors.email){ %> 
                    <div class="text-danger">
                          <%= errors.email.msg %>
                    </div>
                  <% } %>
                </div>
                <div class="input-re">
                  <input type="password" name="password" 
                  placeholder="Nueva contraseÃ±a" class=" <%= locals.errors && errors.password? 'is-invalid': null %>">
                  <% if (locals.errors && errors.password){ %> 
                    <div class="text-danger">
                          <%= errors.password.msg %>
                    </div>
                  <% } %>
                </div>
                <div class="button-login">
                  <button>Actualizar datos</button>
                </div>
              </form> 
            </div>
      </article>
    </section>
   </main>
   
  <!--footer-->
  <%- include('./partials/footer.ejs') %>
</body>
</html>